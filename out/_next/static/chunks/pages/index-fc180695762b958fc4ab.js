(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9105:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return cn}});var r={};n.r(r),n.d(r,{bbox:function(){return K},blur:function(){return ee},color:function(){return Q},emoji:function(){return re},fuzz:function(){return ne},mosaic:function(){return te}});var a=n(2809),o=n(7294),i=n(266),c=n(809),s=n.n(c),l=n(5249),u={"yoloface-18-nn":{name:"Nano 1.18 (12MB)",width:1280,height:1280,iou:.45,nms_threshold:.4,threshold:.5,resize_enabled:!0,labels:["Face"]},"yoloface-18-sm":{name:"Small 1.18 (50MB)",width:1280,height:1280,iou:.45,nms_threshold:.4,threshold:.5,resize_enabled:!0,labels:["Face"]}},d=[{name:"yoloface-18-nn",label:"Nano 1.18 (12MB)"},{name:"yoloface-18-sm",label:"Small 1.18 (50MB)"}];function f(){return p.apply(this,arguments)}function p(){return(p=(0,i.Z)(s().mark((function e(){var t,n=arguments;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:1e3,e.abrupt("return",new Promise((function(e){setTimeout((function(){return e()}),t)})));case 2:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?h(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function g(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?g(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):g(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Z(e){e.name;var t=e.tasks,n=e.ready,r=e.method,a=e.dependencies,c=e.revoke,l=(0,o.useState)({results:null,loading:!1,progress:0,error:null,startTime:null,endTime:null}),u=l[0],d=l[1];return(0,o.useEffect)((function(){var e;if(a.some((function(e){return null===e||void 0===e?void 0:e.loading})))d(v(v({},u),{},{progress:0,results:null}));else{if(n&&!u.loading){var o=!1;return!n&&c&&null!==(e=u.results)&&void 0!==e&&e.length&&c(u.results),function(){l.apply(this,arguments)}(),function(){o=!0}}d({loading:!1,results:null})}function l(){return(l=(0,i.Z)(s().mark((function e(){var n,a,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={loading:!0,progress:0,error:null,results:null,startTime:+new Date,endTime:+new Date},d(n),e.next=4,f(100);case 4:e.prev=4,a=[],i=0;case 7:if(!(i<t.length)){e.next=18;break}return i&&(n.progress=i/t.length,d(n)),e.next=11,r(t[i]);case 11:if(a[i]=e.sent,!o){e.next=15;break}return c&&null!==a&&void 0!==a&&a.length&&c(a),e.abrupt("return");case 15:i++,e.next=7;break;case 18:d(v(v({},n),{},{results:a,loading:!1,endTime:+new Date})),e.next=25;break;case 21:e.prev=21,e.t0=e.catch(4),console.error(e.t0),d(v(v({},n),{},{error:e.t0,loading:!1,endTime:+new Date}));case 25:case"end":return e.stop()}}),e,null,[[4,21]])})))).apply(this,arguments)}}),a),u}var b=n(318),w=function(e){return Math.floor(Math.random()*e)},y=function(){return Math.random()<.5?-1:1},x=function(e){return e[w(e.length)]},k=function(e,t){return e-t*Math.floor(e/t)},D=function(e,t){return Math.sqrt(Math.pow(e,2)+Math.pow(t,2))},O=function(e,t,n){return Math.max(t,Math.min(e,n))};function j(e,t){return C.apply(this,arguments)}function C(){return(C=(0,i.Z)(s().mark((function e(t,n){var r,a,o,i,c,u,d,f,p,h,m,g,v,Z,w,y,x,k,D,j,C,P;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=window.document.createElement("canvas"),a=r.getContext("2d"),r.width=t.settings.width,r.height=t.settings.height,a.drawImage(n.image,0,0,r.width,r.height),o=l.lub((function(){return l.BHj.resizeBilinear(l.Xhn.fromPixels(r),[t.settings.width,t.settings.height]).div(255).expandDims(0)})),e.next=8,t.model.executeAsync(o);case 8:for(i=e.sent,c=(0,b.Z)(i,4),u=c[0],d=c[1],f=c[2],p=c[3],h=p.dataSync()[0],m=u.dataSync(),g=d.dataSync(),v=f.dataSync(),l.B90(i),Z=Array(h),w=0;w<h;w++)y=m.slice(4*w,4*(w+1)),x=(0,b.Z)(y,4),k=x[0],D=x[1],j=x[2],C=x[3],Z[w]={bbox:{x1:O(k,0,r.width),y1:O(D,0,r.height),x2:O(j,0,r.width),y2:O(C,0,r.height)},score:g[w],class:t.settings.labels?t.settings.labels[v[w]]:v[w]};return P=Z.sort((function(e,t){return e.bbox.y1-t.bbox.y1})),e.abrupt("return",{image:n,detections:P});case 19:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var P,E,S=n(2449),N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e?e.charAt(0).toUpperCase()+e.slice(1):""},M=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return String(e||"").split(" ").map(N).join(" ")},R=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=[],a=0;n&&t>n&&(t/=n,r.unshift(Math.floor(10*t%10)),r.unshift("."));do{e=Math.floor(t%10),a+=1,!(t=Math.floor(t/10))||a%3||(e=","+Math.floor(e)),r.unshift(e)}while(t);return r.join("")},B=function(e){try{var t=new URL(e).pathname.split("/");return t[t.length-1]}catch(n){return"image.jpg"}},L=function(e,t){var n,r=T(e)?B(e):e;if(t.process.forceJPG){var a=I(r),o=(0,b.Z)(a,2),i=o[0];o[1];n="".concat(i,".jpg")}else n=r;return t.process.prefixFilename&&(n="DFACE_"+n),n},I=function(e){var t=e.split(".");return[t.slice(0,t.length-1).join("."),t[t.length-1]]},z=function(e,t){if(t.process.forceJPG)return"image/jpeg";var n=L(e,t),r=I(n),a=(0,b.Z)(r,2),o=(a[0],a[1]);return"jpg"===o?"image/jpeg":"image/".concat(o)},T=function(e){return!!e.match(/^https?:\/\//)},X=[{name:"blur",label:"Blur (soft)"},{name:"mosaic",label:"Mosaic"},{name:"fuzz",label:"Fuzz"},{name:"color",label:"Color fill"},{name:"emoji",label:"Emoji"}],F=new Set(["blur","fuzz"]),A=new Set(["emoji"]),_=(X.map((function(e){return e.name})).filter((function(e){return"random"!==e})),[{name:"rect",label:"Rectangle"},{name:"ellipse",label:"Ellipse"}]),U=[{filename:"chuttersnap-8I423fRMwjM-unsplash.jpg",url:"https://unsplash.com/photos/8I423fRMwjM",via:"chuttersnap",license:"License: Unsplash"},{filename:"ehimetalor-akhere-unuabona-72doRdFx-Lo-unsplash.jpg",url:"https://unsplash.com/photos/72doRdFx-Lo",via:"E. Unuabona",license:"License: Unsplash"},{filename:"ehimetalor-akhere-unuabona-06WiXBqhs_A-unsplash.jpg",url:"https://unsplash.com/photos/06WiXBqhs_A",via:"E. Unuabona",license:"License: Unsplash"}],H=(P={red:["#f70707"],green:["#00ff00"],blue:["#0f1fff"]},(0,a.Z)(P,"green",["#00ff00"]),(0,a.Z)(P,"white",["#ffffff"]),(0,a.Z)(P,"black",["#000000"]),(0,a.Z)(P,"white",["#FFFFFF"]),(0,a.Z)(P,"grayscale",["#000000","#222222","#444444","#666666","#888888","#bbbbbb","#dddddd","#ffffff"]),(0,a.Z)(P,"primary",["#f70707","#f78f07","#f7eb07","#02c908","#4163fc","#a241fc"]),(0,a.Z)(P,"neon",["#fc53da","#28fc20","#fcfc20","#20fcf5"]),P),W=(E=H,Object.keys(E).map((function(e){return{name:e,label:M(e)}}))),Y=[{name:"faces",label:"Faces"},{name:"hearts",label:"Hearts"},{name:"halloween",label:"Halloween"},{name:"fruits",label:"Fruits"},{name:"animals",label:"Animals"}],J=function(e){return G(e,4,$)},G=function(e,t,n){var r=!1;return{promise:new Promise((function(a,o){for(var i=0,c=e.length,s=[],l=[],u=0;u<t;u++)l.push(new Promise((function(t){!function a(){var o=i++;if(r||o>=c)return t();var l=e[o];n(l).then((function(e){s[o]=e,a()})).catch((function(e){console.error(e,l),s[o]=null,a()}))}()})));Promise.all(l).then((function(){a(s)})).catch(o)})),cancel:function(){return r=!0}}},q={},$=function(e){var t=e.url,n=e.filename,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return new Promise((function(e,a){if(r&&q[t])return e(q[t]);if(!t||"object"===typeof t&&t instanceof Image)return e({image:t,url:t,filename:n});var o=new Image,i=!1;o.onload=function(){i||(i=!0,o.onload=null,o.onerror=null,r&&(q[t]={url:t,filename:n,image:o}),e({url:t,filename:n,image:o}))},o.onerror=function(){i||(o.onload=null,o.onerror=null,a({url:t,filename:n,image:null}))},o.src=t,o.complete&&o.onload()}))};function V(e,t,n){return new Promise((function(r){try{e.toBlob(r,t,n)}catch(a){reject(a)}}))}function K(e,t,n){var r=H[t.color.palette],a=e.canvas,o=a.width,i=a.height;if(!r)throw new Error("Unknown color palette");e.ctx.clearRect(0,0,o,i);var c="#00ff00";e.ctx.strokeStyle=c,e.ctx.lineWidth=6,e.ctx.strokeRect(Math.ceil(3),Math.ceil(3),Math.floor(o-6),Math.floor(i-6));var s="".concat(n.class," (").concat(Math.round(100*n.score),"%)"),l=Math.ceil(3),u=Math.ceil(3);e.ctx.textBaseline="top",e.ctx.font="".concat(10,"px Roboto");var d=e.ctx.measureText(s).width;e.ctx.fillStyle=c,e.ctx.fillRect(l,u,d+3,13),e.ctx.fillStyle="#000000",e.ctx.fillText(s,3,3)}function Q(e,t){var n=H[t.color.palette],r=e.canvas,a=r.width,o=r.height;if(!n)throw new Error("Unknown color palette");if(e.ctx.fillStyle=x(n),"rect"===t.process.shape)e.ctx.fillRect(0,0,a,o);else if("ellipse"===t.process.shape){e.ctx.clearRect(0,0,a,o);var i=a/2,c=o/2;e.ctx.beginPath(),e.ctx.ellipse(i,c,a/2,o/2,0,0,2*Math.PI),e.ctx.fill()}}function ee(e,t){var n=e.canvas,r=n.width,a=n.height,o=t.blur.radius*D(r,a);S.vR(e.canvas,0,0,r,a,o),S.vR(e.canvas,0,0,r,a,o)}function te(e,t){for(var n,r,a,o,i=e.canvas,c=i.width,s=i.height,l=Math.max(4,Math.ceil(t.mosaic.radius*D(c,s))),u=e.ctx.getImageData(0,0,c,s),d=u.data,f=d.length,p=0;p<f;p+=4)r=(n=p/4)%c,o=4*(((a=Math.floor(n/c))-a%l)*c+(r-r%l)),d[p]=d[o],d[p+1]=d[o+1],d[p+2]=d[o+2],d[p+3]=d[o+3];e.ctx.putImageData(u,0,0)}function ne(e,t){for(var n,r,a,o,i,c=e.canvas,s=c.width,l=c.height,u=Math.ceil(Math.pow(t.fuzz.radius,3)*D(s,l)),d=e.ctx.getImageData(0,0,s,l),f=e.ctx.getImageData(0,0,s,l),p=d.data,h=f.data,m=h.length,g=0;g<m;g+=4)r=(n=g/4)%s,a=Math.floor(n/s),o=k(r+y()*w(u),s),i=4*(k(a+y()*w(u),l)*s+o),h[g]=p[i],h[g+1]=p[i+1],h[g+2]=p[i+2],h[g+3]=p[i+3];e.ctx.putImageData(f,0,0)}function re(e,t){return ae.apply(this,arguments)}function ae(){return(ae=(0,i.Z)(s().mark((function e(t,n){var r,a,o,i,c,l,u,d,f;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=Array.from(document.querySelectorAll(".emoji .".concat(n.emoji.type," img"))),a=x(r),o=t.canvas,i=o.width,c=o.height,t.ctx.clearRect(0,0,i,c),l=Math.min(i,c),u=(i-l)/2,d=(c-l)/2,e.next=9,oe(a.src);case 9:f=e.sent,t.ctx.translate(u,d),t.ctx.drawImage(f,0,0,l,l);case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oe(e){return ie.apply(this,arguments)}function ie(){return(ie=(0,i.Z)(s().mark((function e(t){var n,r,a,o;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!ce[t]){e.next=2;break}return e.abrupt("return",ce[t]);case 2:return e.next=4,fetch(t);case 4:return n=e.sent,e.next=7,n.text();case 7:return r=e.sent,a=btoa(r.replace("<svg","<svg width='200' height='200'")),"data:image/svg+xml;base64,",o="data:image/svg+xml;base64,"+a,e.abrupt("return",new Promise((function(e){var n=new Image;n.onload=function(){ce[t]=n,n.onload=null,e(n)},n.src=o})));case 12:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var ce={},se=n(3162),le=n.n(se);function ue(e,t,n){return de.apply(this,arguments)}function de(){return(de=(0,i.Z)(s().mark((function e(t,n,r){var a,o,i,c,l,u,d,f,p,h,m,g;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.image,o=t.detections,i=he(a.image),c=he(a.image),l=n.process.effect,u=n.detect.confidence,f=0,!A.has(l)){e.next=17;break}p=0;case 8:if(!(p<o.length)){e.next=17;break}if(!((d=o[p]).score<u)){e.next=12;break}return e.abrupt("continue",14);case 12:return e.next=14,fe(i,c,d.bbox,n,"blur");case 14:p++,e.next=8;break;case 17:h=0;case 18:if(!(h<o.length)){e.next=28;break}if(!((d=o[h]).score<u)){e.next=22;break}return e.abrupt("continue",25);case 22:return f+=1,e.next=25,fe(i,c,d.bbox,n,l);case 25:h++,e.next=18;break;case 28:return e.next=30,V(c.canvas,z(a.filename,r),.92);case 30:return m=e.sent,r.process.autoDownload&&le()(m,L(a.filename,r)),g=URL.createObjectURL(m),e.abrupt("return",{url:g,blob:m,image:a,detections:o,detectionCount:f});case 34:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fe(e,t,n,r,a){return pe.apply(this,arguments)}function pe(){return(pe=(0,i.Z)(s().mark((function e(t,n,r,a,o){var i,c,l,u,d;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(i=me(t,r,a,o),c=i.hardCrop,(l=i.softCrop).width&&l.height){e.next=3;break}return e.abrupt("return");case 3:return u=ve(t,l),e.next=6,Ze(o,u,a);case 6:F.has(o)&&(d=we(l,c,a),ye(u,d)),xe(n,u,l,o);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function he(e){var t=window.document.createElement("canvas"),n=t.getContext("2d");return t.width=e.naturalWidth,t.height=e.naturalHeight,n.drawImage(e,0,0,t.width,t.height),{canvas:t,ctx:n}}function me(e,t,n,r){var a,o=n.process,i=o.expand,c=(o.softenEdges,t.x1),s=t.y1,l=t.x2,u=t.y2,d=e.canvas,f=d.width,p=d.height,h=c*f,m=s*p,g=(l-c)*f,v=(u-s)*p,Z=D(g,v)*i,b=ge({x0:h-Z,y0:m-Z,width:g+2*Z,height:v+2*Z});if(F.has(r)){var w=n.process.softenEdges*D(b.width,b.height);a=ge({x0:b.x0-w,y0:b.y0-w,width:b.width+2*w,height:b.height+2*w})}else a=b;return{hardCrop:b,softCrop:a}}var ge=function(e){return Object.keys(e).reduce((function(t,n){return t[n]=Math.round(e[n]),t}),{})};function ve(e,t){var n=window.document.createElement("canvas"),r=n.getContext("2d");return n.width=t.width,n.height=t.height,r.fillStyle="#000000",r.fillRect(0,0,n.width,n.height),r.drawImage(e.canvas,t.x0,t.y0,t.width,t.height,0,0,n.width,n.height),{canvas:n,ctx:r}}function Ze(e,t,n){return be.apply(this,arguments)}function be(){return(be=(0,i.Z)(s().mark((function e(t,n,a){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t in r)){e.next=5;break}return e.next=3,r[t](n,a);case 3:e.next=6;break;case 5:throw new Error("Unknown effect!");case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function we(e,t,n){var r=e.width,a=e.height,o=window.document.createElement("canvas"),i=o.getContext("2d");o.width=r,o.height=a,i.fillStyle="black",i.fillRect(0,0,r,a),i.fillStyle="white";var c=t.x0-e.x0,s=t.y0-e.y0;if("rect"===n.process.shape)i.fillRect(c,s,t.width,t.height);else{if("ellipse"!==n.process.shape)throw new Error("Unknown shape!");var l=c+t.width/2,u=s+t.height/2;i.beginPath(),i.ellipse(l,u,t.width/2,t.height/2,0,0,2*Math.PI),i.fill()}var d=n.process.softenEdges*D(r,a);return S.r_(o,0,0,r,a,d),{canvas:o,ctx:i}}function ye(e,t){for(var n=e.canvas,r=n.width,a=n.height,o=a*r*4,i=e.ctx.getImageData(0,0,r,a),c=t.ctx.getImageData(0,0,r,a),s=i.data,l=c.data,u=0;u<o;u+=4)s[u+3]=l[u];e.ctx.putImageData(i,0,0)}function xe(e,t,n,r){e.ctx.save(),e.ctx.translate(n.x0,n.y0),"emoji"===r&&e.ctx.rotate((Math.random()-.5)*Math.PI*.1),e.ctx.drawImage(t.canvas,0,0),e.ctx.restore()}var ke=n(5308),De=n(8804),Oe=n(6607),je=n(6010),Ce=n(219),Pe=n(3789),Ee=n(8216),Se=n(5997),Ne=n(4695),Me=n(3444),Re=n(268),Be=n(2953),Le="undefined"===typeof document||!document||!document.createElement||"multiple"in document.createElement("input");function Ie(e){var t=[];if(e.dataTransfer){var n=e.dataTransfer;if(n.files&&n.files.length)t=n.files;else if(n.items&&n.items.length)return Array.prototype.slice.call(n.items).filter((function(e){return"file"===e.kind}))}else e.target&&e.target.files&&(t=e.target.files);return Array.prototype.slice.call(t)}function ze(e,t){return"application/x-moz-file"===e.type||function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(","),r=e.name||"",a=e.type||"",o=a.replace(/\/.*$/,"");return n.some((function(e){var t=e.trim();return"."===t.charAt(0)?r.toLowerCase().endsWith(t.toLowerCase()):/\/\*$/.test(t)?o===t.replace(/\/.*$/,""):a===t}))}return!0}(e,t)}function Te(e,t,n){return e.size<=t&&e.size>=n}var Xe=n(8826),Fe=["accept","children","disabled","multiple"],Ae=["preventDropOnDocument","disablePreview","disableClick","maxSize","minSize","inputProps","onDropAccepted","onDropRejected","onFileDialogCancel"];function _e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ue(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_e(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_e(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function He(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=(0,Be.Z)(e);if(t){var a=(0,Be.Z)(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return(0,Re.Z)(this,n)}}var We=function(e){(0,Me.Z)(n,e);var t=He(n);function n(){var e;(0,Ee.Z)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return e=t.call.apply(t,[this].concat(o)),(0,a.Z)((0,Ne.Z)(e),"isFileDialogActive",!1),(0,a.Z)((0,Ne.Z)(e),"composeHandlers",(function(t){return e.props.disabled?null:t})),(0,a.Z)((0,Ne.Z)(e),"onDocumentDrop",(function(t){e.node&&e.node.contains(t.target)||(t.preventDefault(),e.dragTargets=[])})),(0,a.Z)((0,Ne.Z)(e),"onElementDrop",(function(e){})),(0,a.Z)((0,Ne.Z)(e),"onDragStart",(function(t){var n=e.props.onDragStart;n&&n.call((0,Ne.Z)(e),t)})),(0,a.Z)((0,Ne.Z)(e),"onDragEnter",(function(t){var n=e.props.onDragEnter;t.preventDefault(),-1===e.dragTargets.indexOf(t.target)&&e.dragTargets.push(t.target);Ie(t);n&&n.call((0,Ne.Z)(e),t)})),(0,a.Z)((0,Ne.Z)(e),"onDragOver",(function(t){var n=e.props.onDragOver;t.preventDefault(),t.stopPropagation();try{t.dataTransfer.dropEffect="copy"}catch(r){}return n&&n.call((0,Ne.Z)(e),t),!1})),(0,a.Z)((0,Ne.Z)(e),"onDragLeave",(function(t){var n=e.props.onDragLeave;t.preventDefault(),e.dragTargets=e.dragTargets.filter((function(n){return n!==t.target&&e.node.contains(n)})),e.dragTargets.length>0||n&&n.call((0,Ne.Z)(e),t)})),(0,a.Z)((0,Ne.Z)(e),"onDrop",(function(t){var n=e.props,r=n.onDrop,a=n.onDropAccepted,o=n.onDropRejected,i=n.multiple,c=n.disablePreview,s=n.minSize,l=n.maxSize,u=n.accept,d=Ie(t),f=[],p=[];t.preventDefault(),0!==d.length?(e.dragTargets=[],e.isFileDialogActive=!1,d.forEach((function(e){if(!c)try{e.preview=window.URL.createObjectURL(e)}catch(t){0}ze(e,u)&&Te(e,l,s)?f.push(e):p.push(e)})),i||p.push.apply(p,(0,Pe.Z)(f.splice(1))),r&&r.call((0,Ne.Z)(e),f,p,[],t),p.length>0&&o&&o.call((0,Ne.Z)(e),p,t),f.length>0&&a&&a.call((0,Ne.Z)(e),f,t)):e.onLink(t)})),(0,a.Z)((0,Ne.Z)(e),"onClick",(function(t){var n=e.props,r=n.onClick;n.disableClick||(t.stopPropagation(),r&&r.call((0,Ne.Z)(e),t),setTimeout(e.open.bind((0,Ne.Z)(e)),0))})),(0,a.Z)((0,Ne.Z)(e),"onInputElementClick",(function(t){var n=e.props.inputProps;t.stopPropagation(),n&&n.onClick&&n.onClick()})),(0,a.Z)((0,Ne.Z)(e),"onFileDialogCancel",(function(){var t=e.props.onFileDialogCancel,n=(0,Ne.Z)(e).fileInputEl,r=(0,Ne.Z)(e).isFileDialogActive;t&&r&&setTimeout((function(){n.files.length||(r=!1,t())}),300)})),(0,a.Z)((0,Ne.Z)(e),"setRef",(function(t){e.node=t})),(0,a.Z)((0,Ne.Z)(e),"setRefs",(function(t){e.fileInputEl=t})),(0,a.Z)((0,Ne.Z)(e),"onLink",(function(t){var n=e.props,r=n.onDrop,a=n.accept;if(a){var o=a.match(/(\.[^.]+)(?=[,]|$)/gi);if(o){var i="(https://|http://)((?!http).)*("+o.join("|")+")",c=new RegExp(i,"gi"),s=[];if(t.dataTransfer){var l=decodeURIComponent(t.dataTransfer.getData("text/uri-list")).match(c),u=t.dataTransfer.getData("text/html").match(c);l?s=(0,Pe.Z)(l):u&&(s=(0,Pe.Z)(u.filter((function(e){return-1===e.indexOf('"')})).map((function(e){return decodeURIComponent(e)}))))}else s=(0,Pe.Z)(decodeURIComponent(t.target.value).match(c));r&&r([],[],s,t)}else r&&r([],[],[],t)}else r&&r([],[],[],t)})),e}return(0,Se.Z)(n,[{key:"componentDidMount",value:function(){this.dragTargets=[],document.addEventListener("dragstart",this.onDragStart,!1),document.addEventListener("dragenter",this.onDragEnter,!1),document.addEventListener("dragover",this.onDragOver,!1),document.addEventListener("dragleave",this.onDragLeave,!1),document.addEventListener("drop",this.onDrop,!1),this.fileInputEl.addEventListener("click",this.onInputElementClick,!1),document.body.onfocus=this.onFileDialogCancel}},{key:"componentWillUnmount",value:function(){document.removeEventListener("dragstart",this.onDragStart),document.removeEventListener("dragenter",this.onDragEnter),document.removeEventListener("dragover",this.onDragOver),document.removeEventListener("dragleave",this.onDragLeave),document.removeEventListener("drop",this.onDrop),this.fileInputEl.removeEventListener("click",this.onInputElementClick,!1),document.body.onfocus=null}},{key:"open",value:function(){this.isFileDialogActive=!0,this.fileInputEl.value=null,this.fileInputEl.click()}},{key:"render",value:function(){var e=this.props,t=e.accept,n=e.children,r=e.disabled,a=e.multiple,o=(0,Ce.Z)(e,Fe),i=(o.preventDropOnDocument,o.disablePreview,o.disableClick,o.maxSize,o.minSize,o.inputProps,o.onDropAccepted,o.onDropRejected,o.onFileDialogCancel,(0,Ce.Z)(o,Ae));return(0,Xe.BX)("div",Ue(Ue({},i),{},{onClick:this.composeHandlers(this.onClick),onDragStart:this.composeHandlers(this.onDragStart),onDragEnter:this.composeHandlers(this.onDragEnter),onDragOver:this.composeHandlers(this.onDragOver),onDragLeave:this.composeHandlers(this.onDragLeave),onDrop:this.composeHandlers(this.onElementDrop),ref:this.setRef,"aria-disabled":r,children:[n,(0,Xe.tZ)("input",{disabled:r,accept:t,type:"file",style:{display:"none"},multiple:Le&&a,ref:this.setRefs,onChange:this.onDrop,autoComplete:"off"})]}))}}]),n}(o.Component);We.defaultProps={preventDropOnDocument:!0,disabled:!1,disablePreview:!1,disableClick:!1,multiple:!0,maxSize:1/0,minSize:0};var Ye=We;function Je(e){var t=e.onDrop,n=(e.onClick,e.button),r=e.condensed,a=e.processing,c=(e.clickable,e.settings,e.children),l=(0,o.useState)(!1),u=l[0],d=l[1],f=(0,o.useCallback)(function(){var e=(0,i.Z)(s().mark((function e(n,r,a){var o,i;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return o=n.length?n.map((function(e){return{filename:e.name,url:e.preview}})):a.map((function(e){return{filename:B(e),url:e}})),e.next=3,J(o).promise;case 3:i=e.sent;try{d(!1)}catch(r){}t(i);case 6:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),[t]),p=(0,o.useCallback)((function(){d(!0)}),[]),h=(0,o.useCallback)((function(){d(!1)}),[]);return(0,Xe.BX)(Ye,{className:(0,je.Z)({dropzone:!0,button:n,condensed:r,processing:a}),accept:"image/jpeg, image/png, .jpg, .jpeg, .png",multiple:!0,onDrop:f,onDragEnter:p,onDragLeave:h,children:[c,!n&&u&&(0,Xe.tZ)("div",{className:"drag-message",children:(0,Xe.tZ)("div",{children:"Drop images to begin processing"})})]})}function Ge(e){var t=e.message,n=e.errorMessage,r=e.object,a=e.indeterminate,o=r||{loading:!0},i=o.loading,c=o.progress,s=o.error;return s?(0,Xe.BX)("div",{className:"loaderError",children:[s.message,(0,Xe.tZ)("br",{}),n]}):i?(0,Xe.tZ)("div",{className:"loader",children:(0,Xe.BX)("div",{className:"inner",children:[(0,Xe.tZ)("b",{children:t}),(0,Xe.tZ)("div",{className:(0,je.Z)({progress:!0,indeterminate:a}),children:(0,Xe.tZ)("div",{className:"bar",style:{width:Math.round(100*c)+"%"}})})]})}):null}function qe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function $e(e){var t=e.group,n=e.name,r=e.selected,i=e.options,c=e.defaultOption,s=e.title,l=e.onChange,u=e.className,d=(0,o.useState)(!1),f=d[0],p=d[1],h=Ve(i,String(r))||{label:c},m=(0,o.useCallback)((function(){return p(!0)}),[]),g=(0,o.useCallback)((function(){return p(!1)}),[]),v=(0,o.useCallback)((function(e){l(t,n,e.target.value)}),[t,n,l]);return(0,Xe.BX)("label",{className:"selectLabel",children:[s&&(0,Xe.tZ)("span",{children:s}),(0,Xe.BX)("div",{className:(f?"select focus":"select")+" "+(u||""),children:[(0,Xe.tZ)("div",{children:h.label}),(0,Xe.BX)("select",{onFocus:m,onBlur:g,onChange:v,value:r||"__default__",children:[!r&&c&&(0,Xe.tZ)("option",{value:"__default__",children:c}),i.map((function(e,t){return(0,Xe.tZ)(Ke,function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qe(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e),e.name)}))]})]})]})}var Ve=function(e,t){return e.length&&e[0].options&&(e=e.reduce((function(e,t){return e.concat(t.options)}),[])),e.find((function(e){return String(e.name)===String(t)}))},Ke=function(e){var t=e.name,n=e.label,r=e.disabled;return(0,Xe.tZ)("option",{value:t,disabled:r,children:n})},Qe=n(9001);function et(e){var t=e.group,n=e.name,r=e.value,a=e.min,i=e.max,c=e.step,s=e.title,l=e.onChange,u=(0,o.useState)(r),d=u[0],f=u[1],p=(0,o.useCallback)((function(e){f(e)}),[]),h=(0,o.useCallback)((function(e){l(t,n,d)}),[t,n,d,l]);return(0,Xe.BX)("div",{className:"slider",children:[(0,Xe.BX)("div",{className:"desc",children:[(0,Xe.tZ)("span",{children:s}),(0,Xe.tZ)("span",{children:tt((d-a)/(i-a))})]}),(0,Xe.tZ)(Qe.ZP,{min:a,max:i,step:c,defaultValue:r,value:d,onChange:p,onAfterChange:h})]})}var tt=function(e){return Math.round(100*e)+"%"};function nt(e){var t=e.group,n=e.name,r=e.checked,a=e.label,i=e.onChange,c=(0,o.useCallback)((function(e){return i(t,n,e.target.checked)}),[t,n,i]);return(0,Xe.BX)("label",{className:"checkbox",children:[(0,Xe.tZ)("input",{type:"checkbox",name:n,value:1,checked:!!r,onChange:c}),(0,Xe.tZ)("span",{children:a})]})}function rt(e){var t=e.settings,n=e.resultsSettings,r=e.processing,a=e.onChange,i=e.onResultsSettingsChange,c=e.onDrop,s=e.showDropZone,l=(0,o.useState)(!1),u=l[0],f=l[1],p=(0,o.useCallback)((function(){f(!u)}),[u]);return(0,Xe.BX)("div",{className:(0,je.Z)({settings:!0,processing:r}),children:[s&&(0,Xe.tZ)(Je,{onDrop:c,settings:t,condensed:!0,processing:r,children:(0,Xe.tZ)("div",{className:"introText",children:"+ Add Image"})}),(0,Xe.tZ)($e,{group:"process",name:"effect",selected:t.process.effect,options:X,defaultOption:"color",title:"Redaction effect",onChange:a}),F.has(t.process.shape)&&(0,Xe.tZ)($e,{group:"process",name:"shape",className:"small",selected:t.process.shape,options:_,defaultOption:"rect",title:"Shape",onChange:a}),"color"===t.process.effect&&(0,Xe.tZ)(Xe.HY,{children:(0,Xe.tZ)($e,{group:"color",name:"palette",selected:t.color.palette,options:W,defaultOption:"primary",title:"Color palette",onChange:a})}),"blur"===t.process.effect&&(0,Xe.tZ)(Xe.HY,{children:(0,Xe.tZ)(et,{group:"blur",name:"radius",value:t.blur.radius,min:.1,max:.2,step:.01,title:"Blur radius",onChange:a})}),"mosaic"===t.process.effect&&(0,Xe.tZ)(Xe.HY,{children:(0,Xe.tZ)(et,{group:"mosaic",name:"radius",value:t.mosaic.radius,min:.1,max:.3,step:.01,title:"Mosaic size",onChange:a})}),"fuzz"===t.process.effect&&(0,Xe.tZ)(Xe.HY,{children:(0,Xe.tZ)(et,{group:"fuzz",name:"radius",value:t.fuzz.radius,min:.25,max:.5,step:.01,title:"Fuzz factor",onChange:a})}),"emoji"===t.process.effect&&(0,Xe.tZ)(Xe.HY,{children:(0,Xe.tZ)($e,{group:"emoji",name:"type",selected:t.emoji.type,options:Y,defaultOption:"primary",title:"Emoji theme",onChange:a})}),(0,Xe.tZ)(et,{group:"detect",name:"confidence",value:t.detect.confidence,min:0,max:1,step:.01,title:"Minimum Confidence",onChange:a}),(0,Xe.BX)("div",{className:(0,je.Z)({checkboxes:!0,advanced:u}),children:[(0,Xe.tZ)("div",{className:"title",onClick:p,children:"Advanced Options"}),u&&(0,Xe.BX)(Xe.HY,{children:[(0,Xe.tZ)(nt,{group:"process",name:"autoDownload",checked:n.process.autoDownload,label:"Auto download",onChange:i}),(0,Xe.tZ)(nt,{group:"process",name:"forceJPG",checked:n.process.forceJPG,label:"Force JPG",onChange:i}),(0,Xe.tZ)(nt,{group:"process",name:"prefixFilename",checked:n.process.prefixFilename,label:"Prefix Filename",onChange:i}),(0,Xe.tZ)(nt,{group:"process",name:"showSamples",checked:n.process.showSamples,label:"Show samples",onChange:i}),(0,Xe.tZ)($e,{group:"detect",name:"model",className:"modelName",selected:t.detect.model,options:d,defaultOption:null,title:"Detection Model",onChange:a})]})]})]})}function at(e){var t=e.onClick,n=e.isWorking;return(0,Xe.BX)("div",{className:"sampleImages",children:[(0,Xe.tZ)("span",{className:"desc",children:"Sample images"}),(0,Xe.tZ)("div",{className:(0,je.Z)({isWorking:n}),children:U.map((function(e,n){return(0,Xe.BX)("div",{children:[(0,Xe.tZ)("img",{src:"/assets/img/sample/".concat(e.filename),onClick:t}),"via ",e.via&&(0,Xe.tZ)("a",{href:e.url,children:e.via})," ",(0,Xe.tZ)("br",{}),"".concat(e.license||"sample")]},n)}))})]})}function ot(e){var t=e.results,n=(e.settings,e.resultsSettings),r=e.onReset,a=e.timing,i=(0,o.useCallback)((function(){t.forEach((function(e){le()(e.blob,L(e.image.filename,n))}))}),[t]);return(0,Xe.tZ)("div",{className:"results",children:null===t||void 0===t?void 0:t.map((function(e,o){return(0,Xe.BX)("div",{className:"result",children:[(0,Xe.tZ)("div",{className:"image",style:{backgroundImage:"url(".concat(e.url,"), url(").concat(e.image.url,")"),maxWidth:e.image.image.naturalWidth,aspectRatio:"".concat(e.image.image.naturalWidth," / ").concat(e.image.image.naturalHeight)}}),(0,Xe.BX)("div",{className:"meta",children:[(0,Xe.tZ)("a",{href:e.url,download:L(e.image.filename,n),className:"downloadLink",children:"Download image"}),t.length>1&&(0,Xe.BX)("button",{className:"downloadAll",onClick:i,children:["Download All (",t.length,")"]}),(0,Xe.tZ)("button",{className:"reset",onClick:r,children:"Reset"}),(0,Xe.BX)("div",{className:"info",children:[e.detectionCount?(c=e.detectionCount,s="face",1===c?"".concat(c," ").concat(s):l?"".concat(R(c)," ").concat(l):"".concat(R(c)," ").concat(s,"s")):"No faces detected",0===o&&", ".concat(a.toFixed(1)," sec. ")]})]})]},o);var c,s,l}))})}function it(e){var t=e.images;return(0,Xe.tZ)("div",{className:"results placeholder",children:t.map((function(e,t){var n,r,a;return(0,Xe.BX)("div",{className:"result",children:[(0,Xe.tZ)("div",{className:"image",style:{backgroundColor:"#ddd",backgroundImage:"url(".concat(e.url,")"),width:"100%",maxWidth:null===(n=e.image)||void 0===n?void 0:n.naturalWidth,aspectRatio:"".concat(null===(r=e.image)||void 0===r?void 0:r.naturalWidth," / ").concat(null===(a=e.image)||void 0===a?void 0:a.naturalHeight)}}),(0,Xe.tZ)("div",{className:"meta",children:(0,Xe.tZ)("div",{className:"info",children:"Processing..."})})]},t)}))})}var ct=n(1013),st=n(9335),lt=n(4459),ut=n(1278),dt=n(9015),ft=n(9839),pt=n(4227),ht=n(7229),mt=n(6438),gt=n(3811),vt=n(5982),Zt=n(1227),bt=n(9993),wt=n(6635),yt=n(3040),xt=n(2261),kt=n(8188),Dt=n(9785),Ot=n(2412),jt=n(2147),Ct=n(7068),Pt=n(4765),Et=n(6113),St=n(1214),Nt=n(9496),Mt=n(8045),Rt=n(4258),Bt=n(8137),Lt=n(2623),It=n(6289),zt=n(4978),Tt=n(9550),Xt=n(7233),Ft=n(9766),At=n(3235),_t=n(5711),Ut=n(458),Ht=n(7991),Wt=n(7680),Yt=n(8451),Jt=n(940),Gt=n(1185),qt=n(255),$t=n(8326),Vt=n(5930),Kt=n(6414),Qt=n(5664),en=n(9599),tn=n(8229);function nn(){return(0,Xe.BX)("div",{className:"emoji",children:[(0,Xe.BX)("div",{className:"faces",children:[(0,Xe.tZ)("img",{src:ct.Z.src}),(0,Xe.tZ)("img",{src:st.Z.src}),(0,Xe.tZ)("img",{src:lt.Z.src}),(0,Xe.tZ)("img",{src:ut.Z.src}),(0,Xe.tZ)("img",{src:dt.Z.src}),(0,Xe.tZ)("img",{src:ft.Z.src}),(0,Xe.tZ)("img",{src:pt.Z.src}),(0,Xe.tZ)("img",{src:ht.Z.src}),(0,Xe.tZ)("img",{src:mt.Z.src}),(0,Xe.tZ)("img",{src:gt.Z.src}),(0,Xe.tZ)("img",{src:vt.Z.src}),(0,Xe.tZ)("img",{src:Zt.Z.src}),(0,Xe.tZ)("img",{src:bt.Z.src}),(0,Xe.tZ)("img",{src:wt.Z.src}),(0,Xe.tZ)("img",{src:yt.Z.src}),(0,Xe.tZ)("img",{src:xt.Z.src}),(0,Xe.tZ)("img",{src:kt.Z.src}),(0,Xe.tZ)("img",{src:Dt.Z.src}),(0,Xe.tZ)("img",{src:Ot.Z.src})]}),(0,Xe.BX)("div",{className:"hearts",children:[(0,Xe.tZ)("img",{src:ct.Z.src}),(0,Xe.tZ)("img",{src:jt.Z.src}),(0,Xe.tZ)("img",{src:Ct.Z.src}),(0,Xe.tZ)("img",{src:Pt.Z.src}),(0,Xe.tZ)("img",{src:Et.Z.src}),(0,Xe.tZ)("img",{src:St.Z.src})]}),(0,Xe.BX)("div",{className:"halloween",children:[(0,Xe.tZ)("img",{src:Nt.Z.src}),(0,Xe.tZ)("img",{src:Mt.Z.src}),(0,Xe.tZ)("img",{src:Rt.Z.src}),(0,Xe.tZ)("img",{src:Bt.Z.src}),(0,Xe.tZ)("img",{src:Lt.Z.src}),(0,Xe.tZ)("img",{src:It.Z.src}),(0,Xe.tZ)("img",{src:zt.Z.src})]}),(0,Xe.BX)("div",{className:"fruits",children:[(0,Xe.tZ)("img",{src:$t.Z.src}),(0,Xe.tZ)("img",{src:Vt.Z.src}),(0,Xe.tZ)("img",{src:Kt.Z.src}),(0,Xe.tZ)("img",{src:Qt.Z.src}),(0,Xe.tZ)("img",{src:en.Z.src}),(0,Xe.tZ)("img",{src:tn.Z.src})]}),(0,Xe.BX)("div",{className:"animals",children:[(0,Xe.tZ)("img",{src:Tt.Z.src}),(0,Xe.tZ)("img",{src:Xt.Z.src}),(0,Xe.tZ)("img",{src:Ft.Z.src}),(0,Xe.tZ)("img",{src:At.Z.src}),(0,Xe.tZ)("img",{src:_t.Z.src}),(0,Xe.tZ)("img",{src:Ut.Z.src}),(0,Xe.tZ)("img",{src:Ht.Z.src}),(0,Xe.tZ)("img",{src:Wt.Z.src}),(0,Xe.tZ)("img",{src:Yt.Z.src}),(0,Xe.tZ)("img",{src:Jt.Z.src}),(0,Xe.tZ)("img",{src:Gt.Z.src}),(0,Xe.tZ)("img",{src:qt.Z.src})]})]})}function rn(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function an(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rn(Object(n),!0).forEach((function(t){(0,a.Z)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rn(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function on(){var e,t=(0,o.useState)({detect:{model:"yoloface-18-nn",confidence:.25},process:{effect:"color",palette:"blue",shape:"rect",softenEdges:.1,expand:.1},blur:{radius:.15},color:{palette:"blue"},mosaic:{radius:.15},emoji:{type:"faces"},fuzz:{radius:.5}}),n=t[0],r=t[1],c=(0,o.useState)({process:{autoDownload:!1,downloadJSON:!1,forceJPG:!1,prefixFilename:!0,showSamples:!0}}),d=c[0],p=c[1],h=(0,o.useState)([]),g=h[0],v=h[1],b=function(e){var t=(0,o.useState)({model:null,loading:!1,progress:0,error:null}),n=t[0],r=t[1];return(0,o.useEffect)((function(){function t(){return(t=(0,i.Z)(s().mark((function t(){var a,o;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r(m(m({},n),{},{loading:!0})),t.next=3,f(100);case 3:return a="/assets/models/".concat(e,"/model.json"),t.prev=4,console.log("Loading ".concat(a)),t.next=8,l.YLj(a,{onProgress:function(e){return r(m(m({},n),{},{progress:e}))}});case 8:o=t.sent,r(m(m({},n),{},{progress:0,loading:!1,model:{name:e,settings:u[e],model:o}})),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(4),console.error(t.t0),r(m(m({},n),{},{loading:!1,progress:0,error:t.t0}));case 16:case"end":return t.stop()}}),t,null,[[4,12]])})))).apply(this,arguments)}e&&(console.log(e,"changed"),function(){t.apply(this,arguments)}())}),[e]),n}(n.detect.model),w=function(e,t){var n=(0,o.useMemo)((function(){return!(null!==e&&void 0!==e&&e.loading)&&(null===e||void 0===e?void 0:e.model)&&(null===t||void 0===t?void 0:t.length)}),[e,t]),r=(0,o.useMemo)((function(){return function(){var t=(0,i.Z)(s().mark((function t(n){return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j(null===e||void 0===e?void 0:e.model,n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}),[null===e||void 0===e?void 0:e.model,t]);return Z({name:"detect",tasks:t,dependencies:[null===e||void 0===e?void 0:e.model,t],ready:n,method:r})}(b,g),y=function(e,t,n,r){var a=(0,o.useMemo)((function(){var e;return null===t||void 0===t||null===(e=t.results)||void 0===e?void 0:e.length}),[t]),c=(0,o.useMemo)((function(){return function(){var e=(0,i.Z)(s().mark((function e(t){return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ue(t,n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()}),[t,n,r]),l=(0,o.useMemo)((function(){return function(e){return e.forEach((function(e){return URL.revokeObjectURL(e.url)}))}}));return Z({name:"process",tasks:null===t||void 0===t?void 0:t.results,dependencies:[e,t,n],ready:a,method:c,revoke:l})}(b,w,n,d),x=(0,o.useState)(!1),k=x[0],D=x[1];(0,o.useEffect)((function(){D(!!g.length&&((null===b||void 0===b?void 0:b.loading)||(null===w||void 0===w?void 0:w.loading)||(null===y||void 0===y?void 0:y.loading)||!(null!==w&&void 0!==w&&w.results)||!(null!==y&&void 0!==y&&y.results)))}),[b,w,y]);var O=(0,o.useCallback)((function(e){v(e),p(an(an({},d),{},{process:an(an({},d.process),{},{showSamples:!1})}))}),[d]),C=(0,o.useCallback)((function(e){v([{url:e.target.src,image:e.target,filename:B(e.target.src)}])}),[n]),P=(0,o.useCallback)((function(e,t,o){var i=an(an({},n),{},(0,a.Z)({},e,an(an({},n[e]),{},(0,a.Z)({},t,o))));"model"===t&&(i.detect.confidence=u[o].threshold),r(i)}),[n]),E=(0,o.useCallback)((function(e,t,n){var r=an(an({},d),{},(0,a.Z)({},e,an(an({},d[e]),{},(0,a.Z)({},t,n))));p(r)}),[d]),S=(0,o.useCallback)((function(){v([]),p(an(an({},d),{},{process:an(an({},d.process),{},{showSamples:!0})}))}),[d]);return(0,Xe.BX)(Xe.HY,{children:[(0,Xe.tZ)(ke.Z,{children:(0,Xe.tZ)(rt,{settings:n,resultsSettings:d,processing:k,onChange:P,onResultsSettingsChange:E,onDrop:O,showDropZone:!(null===g||void 0===g||!g.length)})}),(0,Xe.BX)("div",{className:"content container",children:[!(null!==g&&void 0!==g&&g.length)&&(0,Xe.tZ)(Je,{onDrop:O,settings:n,condensed:!(null===g||void 0===g||!g.length),processing:k,children:(0,Xe.tZ)("div",{className:"introText",children:(0,Xe.tZ)("div",{className:"introTextB",children:"Choose or drop photo"})})}),(0,Xe.BX)("div",{className:"app",children:[(b.loading||b.error)&&(0,Xe.tZ)(Ge,{object:b,message:"Loading model...",errorMessage:"Please try a different model."}),!(null===g||void 0===g||!g.length)&&k&&(0,Xe.tZ)(it,{images:g}),!(null===g||void 0===g||!g.length)&&!k&&!(null===y||void 0===y||null===(e=y.results)||void 0===e||!e.length)&&(0,Xe.tZ)(ot,{timing:(y.endTime-y.startTime+w.endTime-w.startTime)/1e3,settings:n,resultsSettings:d,results:y.results,onReset:S}),d.process.showSamples&&(0,Xe.tZ)(at,{onClick:C,isWorking:k}),(0,Xe.tZ)(nn,{})]})]}),Oe.tq&&(0,Xe.tZ)(De.Z,{})]})}function cn(){return(0,Xe.tZ)(on,{})}cn.getLayout=function(e){return e}},8581:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return n(9105)}])},5410:function(){},8628:function(){},1601:function(){},7792:function(){},8963:function(){},5042:function(){}},function(e){e.O(0,[864,904,723,974,132,665,774,888,179],(function(){return t=8581,e(e.s=t);var t}));var t=e.O();_N_E=t}]);